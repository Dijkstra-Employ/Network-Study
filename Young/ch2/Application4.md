## 2.4 DNS -- THe Internet's Directory Service
우리는 호스트 이름과 IP 주소로 호스트를 식별할 수 있다. 사람들은 기억하기 쉬운 호스트 이름 식별자를 선호하지만 **라우터는 고정 길이의 계층 구조로 구성된 IP 주소를 선호한다.**

> 이를 위해서는 호스트 이름을 IP 주소로 변환하는 디렉터리 서비스가 필요한데 이것이 바로 인터넷 도메인 이름 시스템(DNS)이다.

**DNS**
1. DNS는 서버 계층 구조로 구현된 분산 데이터베이스
2. 호스트가 분산 데이터베이스에 쿼리할 수 있도록 하는 애플리케이션 계층 프로토콜

**DNS는 호스트 이름을 IP 주소로 변환하는 것 이외에도 몇 가지 중요한 서비스를 제공한다.**
- 호스트 별칭 : 복잡한 호스트 이름을 가진 호스트는 하나 이상의 별칭 이름을 가질 수 있다.(더 기억하기 쉬움)
- 메일 서버 별칭 : 실제 메일 서버의 호스트 이름은 더 복잡하고 기억하기 어렵기 떄문에 DNS에 의해서 정식 호스트 이름과 호스트의 IP 주소를 얻을 수 있다.
- 부하 분산 : DNS는 복제된 웹 서버와 같은 서버 간에 부하 분산을 수행하는 데에도 사용된다. 

---

### DNS 작동 방식 개요
DNS에 대한 간단한 설계는 모든 매핑을 포함하는 하나의 DNS 서버를 만드는 것이다. 이 중앙 집중식 설계에는 호스트 수가 점점 늘어날수록 부적합해진다.
- 단일 장애 지점
- 교통량
- 멀리 떨어진 중앙 집중식 데이터베이스
- 유지

#### 분산된 계층적 데이터베이스
이러한 문제를 해결하기 위해서 DNS는 계층적 방식으로 구성되고 전 세계에 수많은 분산된 서버를 사용한다
![](https://velog.velcdn.com/images/choiyoung6609/post/224d23b5-8c93-40cc-8dcc-f1ffdac888b9/image.png)

- Root DNS 서버 : 전 세계에 1000개 이상의 루트 서버 인스턴스가 분산되어 있다. 이러한 루트 서버는 12개의 서로 다른 조직에서 관리한다. 루트 이름 서버의 전체 목록과 이를 관리하는 IP 주소는 루트 서버에서 확인할 수 있따.(TLD 서버의 IP 주소 제공)
- TLD(최상위 도메인) 서버 : 최상위 도메인(com, org 등)과 같은 최상위 도메인에는 TLD 서버가 있다. TLD 서버는 권한 있는 DNS 서버에 IP 주소를 제공한다.
- 권한 있는 DNS 서버 : 인터넷에 공개적으로 액세스 가능한 호스트가 있는 조직은 해당 호스트이 이름을 IP 주소에 매핑하는 DNS 레코드를 제공해야 하는데 여기에 이것이 저장되어 있다. 

또한, 로컬 DNS 서버라는 또 다른 중요한 DNS 서버가 있다. 서버 계층 구조에는 속하지 않지만 호스트가 ISP에 연겨로댔을 떄 ISP는 하나 이상의 DNS 서버의 IP 주소를 호스트에 제공한다. 

#### DNS 캐싱
DNS는 지연 성능을 개선하고 DNS 메세지를 줄이기 위해 DNS 캐싱을 활용한다. **호스트 이름/IP 주소 쌍이 DNS 서버에 캐시 되어 있어서 동일한 호스트 이름에 대한 다른 쿼리가 DNS 서버에 도착하는 경우 호스트 이름에 대한 권한이 없어도 IP 주소를 제공해준다.**

---

### DNS 레코드 및 메세지
DNS는 메세지 종류가 DNS 쿼리 및 응답 메세지 두 종류를 가지고 있다.

![](https://velog.velcdn.com/images/choiyoung6609/post/5b83dc87-0468-48bc-998a-d0e02ccc578a/image.png)
