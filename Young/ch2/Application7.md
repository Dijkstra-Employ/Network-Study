
## 소켓 프로그래밍 : 네트워크 애플리케이션 생성
일반적으로 네트워크 애플리케이션은 클라이언트 프로그램(클라이언트 프로세스)와 서버 프로그램(서버 프로세스)로 구성된다. 

클라이언트-서버 애플리케이션에는 두 가지 형태가 있다. 

> **RFC에 정의된 표준 프로토콜 구현하는 방법**</br>
개방형이라고도 불린다.
그 동작을 규정하는 모든 규칙들이 모두에게 알려져 있기 떄문이다. 클라이언트와 서버 프로그램은 RFC에 정의된 규칙을 따라야 한다. 그 프로토콜과 연관된 포트번호를 사용해야 한다.

> **개인의 독점적인 네트워크 애플리케이션**</br>
RFC나 다른 곳에서 공식적으로 인정받지 않은 애플리케이션 계층 프로토콜을 사용한다. 개인 개발자는 클라이언트와 서버 프로그램을 모두 생성하고, 다른 독립 개발자는 이 애플리케이션과 상호작용하는 코드를 개발할 수 없다. 잘 알려진 포트 번호를 사용하지 않도록 해야 한다.

개발 단계에서 가장 우선시해야 하는 결정은 TCP를 이용할 것인가, UDP를 이용할 것인가 설정하는 것이다. **TCP는 연결 지향적이고 신뢰적 바이트 스트림 채널을 이용**하지만, **UDP**는 **비연결적**이다.

### 1. UDP를 이용한 소켓 프로그래밍
![](https://velog.velcdn.com/images/choiyoung6609/post/2a00a589-b795-4516-a2b4-ed949e29ec6a/image.png)

1. client에서 먼저 소켓을 생성해야 한다.
2. 소켓 문 밖으로 패킷을 밀어내기 전, 목적지 주소를 붙여야 한다.
3. 수신 프로세스는 소켓을 통해 패킷을 추출하고 적절한 동작을 취한다. -> 클라이언트가 메세지를 전송하기 전에 수신 프로세스는 이미 수행되고 있어야 한다.

여기서 목적지 주소란 목적지 호스트의 IP주소와 포트 번호를 포함한다. 여기서 목적지 주소는 client에서 붙이지만 client 주소는 일반적으로 하부 운영체제가 자동으로 붙여준다.


### 2. TCP를 이용한 소켓 프로그래밍
![](https://velog.velcdn.com/images/choiyoung6609/post/7e6c392e-5bcc-4ab0-8cc8-31efc6dcfbcc/image.png)

UDP와 다르게 TCP는 연결 지향 프로토콜로 클라이언트와 서버가 데이터를 보내기 전에 **서로 TCP 연결을 설정해야 한다.** TCP 연결에서는 클라이언트 소켓 주소와 서버의 소켓 주소를 연결한다.

1. 클라이언트가 서버로의 접속을 시도한다.
2. 서버 프로그램은 **임의의 컴퓨터에서 수행되고 있는 클라이언트로부터의 초기 접속을 처리하는 특별한 출입문(특별한 소켓)**을 가져야 한다.
4. 서버 프로세스가 수행되면 클라이언트 프로세스는 TCP 연결을 시도하는데 이때 서버에 있는 환영 소켓의 주소가 명시되어 TCP 연결을 설정한다.
5. TCP 연결을 하는 동안 서버는 해당 클라이언트에게 지정되는 새로운 소켓을 생성한다. - connectedSocket
6. 클라이언트 소켓과 서버의 연결 소켓은 파이프에 의ㅡ해 직접 연결된다.




