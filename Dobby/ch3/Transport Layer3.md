## Pipelined protocols

TCP가 동작하는 방식

신뢰성을 보장하면서 빠른 속도를 제공할 수 있다.

rdt3.0의 핵심적인 성능 문제는 rdt3.0이 전송 후 대기 프로토콜이라는 점이다.

전송 후 대기 프로토콜은 형편없는 송신자 이용률을 갖는다.

이러한 방식 대신, 확인응답을 기다리지 않고 여러 패킷을 전송하도록 한다.

만약 확인응답들을 기다리기 전에 송신자가 3개의 패킷을 전송하도록 허용한다면 송신자 이용률은 3배가 된다.

많은 전송 중인 송신자-수신자 패킷을 파이프라인에 채워 넣음으로써 나타낼 수 있다.

이를 `파이프라이닝` 이라고 한다.

<br />

- 순서 번호의 범위가 커져야 한다.
  각각의 전송 중인 패킷은 유일한 순서 번호를 가져야 하는데, 전송 중인 확인응답이 안된 패킷이 여럿 있을지도 모르기 때문이다.

- 프로토콜의 송신 측과 수신 측은 패킷 하나 이상을 버퍼링해야 한다.
  최소한 송신자는 전송되었으나 확인응답되지 않은 패킷을 버퍼링해야 한다.

- 필요한 순서 번호의 범위와 버퍼링 조건은 데이터 전송 프로토콜이 손실 패킷과 손상 패킷 그리고 상당히 지연된 패킷들에 대해 응답하는 방식에 달려 있다.
  파이프라인 오류 회복의 두 가지 기본적인 접근 방법으로 GBN(Go-Back-N)과 SR(Selective Repeat) 등이 있다.

<br />

### GBN

GBN 프로토콜에서 송신자는 확인응답을 기다리지 않고 여러 패킷을 전송할 수 있다.

그러나 파이프라인에서 확인응답이 안 된 패킷의 최대 허용 수 N보다 크지 말아야 한다.

![image](https://github.com/user-attachments/assets/cb9f1e26-6f08-4e3d-9027-bef526956a18)


GBN 프로토콜은 슬라이딩 윈도 프로토콜이라고 부른다.

GBN 프로토콜에서 수신자는 순서가 잘못된 패킷들을 버린다.

이 기술에는 순서 번호, 누적 확인응답, 체크섬, 타임아웃/재전송 동작에 대한 사용이 포함된다.

<br />

### SR

수신자에서 오류가 발생한 패킷을 수신했다고 의심되는 패킷만을 송신자가 다시 전송하므로 불필요한 재전송을 피한다.

필요에 따라 각각 개별적인 재전송은 수신자가 올바르게 수신된 패킷에 대한 개별적인 확인응답을 요구할 것이다.
